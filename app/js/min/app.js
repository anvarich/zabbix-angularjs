/*! angular 2013-05-15 */
"use strict";function dateConverter(timestamp,format){var a=new Date(1e3*timestamp),months=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],hrs=a.getHours(),min=a.getMinutes(),sec=a.getSeconds();return 0===hrs&&(hrs="0"+hrs),10>min&&(min="0"+min),10>sec&&(sec="0"+sec),format?"time"===format?hrs+":"+min+":"+sec:void 0:a.getDate()+" "+months[a.getMonth()]+" "+a.getFullYear()+", "+hrs+":"+min+":"+sec}function timeConverter(){var currentTime=new Date,hours=currentTime.getHours(),minutes=currentTime.getMinutes(),seconds=currentTime.getSeconds();return 0===hours&&(hours="0"+hours),10>minutes&&(minutes="0"+minutes),10>seconds&&(seconds="0"+seconds),hours+":"+minutes+":"+seconds}var api_url="http://zabbixcm02.internal.corp/api_jsonrpc.php",zabbix_url="http://zabbixcm02.internal.corp",triggerUpdateInterval=3e4,hostgroupUpdateInterval=6e5,app=angular.module("zabbix",["LocalStorageModule","SharedServices","templates-main"]).config(function($routeProvider,$locationProvider){$routeProvider.when("/",{controller:overviewController,templateUrl:"../app/views/overview.html",title_prefix:"Home"}).when("/servers",{controller:serversController,templateUrl:"../app/views/servers.html",title_prefix:"Servers"}).when("/servers/:serverId",{controller:serversDetailsController,templateUrl:"../app/views/serverDetails.html",title_prefix:"Server"}).when("/project/:projectId",{controller:projectController,templateUrl:"../app/views/project.html",title_prefix:"Project"}).when("/dashboard",{controller:dashboardController,templateUrl:"../app/views/dashboard.html",title_prefix:"Dashboard"}).when("/search/:searchString",{controller:searchController,templateUrl:"../app/views/search.html",title_prefix:"Search"}).when("/login").when("/logout",{controller:logoutController,title_prefix:"Logout",templateUrl:"../app/views/logout.html"}).otherwise({redirectTo:"/"}),$locationProvider.html5Mode(!1)}).directive("onFinishRender",function($timeout){return{restrict:"A",link:function(scope,element,attr){scope.$last===!0&&$timeout(function(){scope.$emit(attr.onFinishRender)})}}});app.run(function($rootScope,$route,$http,$location,localStorageService){!$rootScope.loggedIn&&localStorageService.get("auth")&&($rootScope.auth=localStorageService.get("auth"),$rootScope.auth_id=localStorageService.get("auth_id"),$rootScope.loggedIn=!0,$http.post(api_url,{jsonrpc:"2.0",id:$rootScope.auth_id,auth:$rootScope.auth,method:"host.get",params:{monitored_hosts:!0,output:["name"],sortfield:"name"}}).success(function(data){$rootScope.serversOnline=data.result})),$rootScope.page_title="Home - Zabbix",$rootScope.$on("$routeChangeSuccess",function(){return $rootScope.loggedIn||$location.path("/login"),$rootScope.page_title=$route.current&&$route.current.$route&&$route.current.$route.title_prefix?$route.current.$route.title_prefix+" - Zabbix":"Zabbix","/dashboard"!==$location.path()?($rootScope.fullscreen="",void 0):void 0})}),angular.module("SharedServices",[]).config(function($httpProvider){$httpProvider.responseInterceptors.push("myHttpInterceptor");var spinnerFunction=function(data){return $("#loading").show(),data};$httpProvider.defaults.transformRequest.push(spinnerFunction)}).factory("myHttpInterceptor",function($q){return function(promise){return promise.then(function(response){return $("#loading").hide(),response},function(response){return $("#loading").hide(),$q.reject(response)})}});