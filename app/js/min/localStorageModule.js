/*! angular 2013-05-02 */
"use strict";var angularLocalStorage=angular.module("LocalStorageModule",[]);angularLocalStorage.constant("prefix","ls"),angularLocalStorage.constant("cookie",{expiry:30,path:"/"}),angularLocalStorage.service("localStorageService",["$rootScope","prefix","cookie",function(e,t,r){"."!==t.substr(-1)&&(t=t?t+".":"");var o=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(t){return e.$broadcast("LocalStorageModule.notification.error",t.Description),!1}},n=function(r,n){if(!o())return e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),!1;if(!n&&0!==n&&""!==n)return!1;try{localStorage.setItem(t+r,n)}catch(a){return e.$broadcast("LocalStorageModule.notification.error",a.Description),!1}return!0},a=function(r){if(!o())return e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),!1;var n=localStorage.getItem(t+r);return n?n:null},i=function(r){if(!o())return e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),!1;try{localStorage.removeItem(t+r)}catch(n){return e.$broadcast("LocalStorageModule.notification.error",n.Description),!1}return!0},s=function(){if(!o())return e.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),!1;var r=t.length;for(var n in localStorage)if(n.substr(0,r)===t)try{i(n.substr(r))}catch(a){return e.$broadcast("LocalStorageModule.notification.error",a.Description),!1}return!0},l=function(){try{return navigator.cookieEnabled||"cookie"in document&&(document.cookie.length>0||(document.cookie="test").indexOf.call(document.cookie,"test")>-1)}catch(t){return e.$broadcast("LocalStorageModule.notification.error",t.Description),!1}},u=function(o,n){if(n===void 0)return!1;if(!l())return e.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;try{var a="",i=new Date;null===n&&(r.expiry=-1,n=""),0!==r.expiry&&(i.setTime(i.getTime()+1e3*60*60*24*r.expiry),a="; expires="+i.toGMTString()),document.cookie=t+o+"="+encodeURIComponent(n)+a+"; path="+r.path}catch(s){return e.$broadcast("LocalStorageModule.notification.error",s.Description),!1}return!0},c=function(r){if(!l())return e.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;for(var o=document.cookie.split(";"),n=0;o.length>n;n++){for(var a=o[n];" "==a.charAt(0);)a=a.substring(1,a.length);if(0==a.indexOf(t+r+"="))return decodeURIComponent(a.substring(t.length+r.length+1,a.length))}return null},d=function(e){u(e,null)},p=function(){for(var e=null,r=t.length,o=document.cookie.split(";"),n=0;o.length>n;n++){for(e=o[n];" "==e.charAt(0);)e=e.substring(1,e.length);key=e.substring(r,e.indexOf("=")),d(key)}};return{isSupported:o,add:n,get:a,remove:i,clearAll:s,cookie:{add:u,get:c,remove:d,clearAll:p}}}]);